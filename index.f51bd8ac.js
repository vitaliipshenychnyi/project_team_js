function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=e.parcelRequired7c6;null==o&&((o=function(t){if(t in n)return n[t].exports;if(t in a){var e=a[t];delete a[t];var o={id:t,exports:{}};return n[t]=o,e.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){a[t]=e},e.parcelRequired7c6=o),o.register("5UGx0",(function(t,e){t.exports=new URL(o("kyEFX").resolve("15crv"),import.meta.url).toString()})),o.register("3DT0U",(function(t,e){t.exports=new URL(o("kyEFX").resolve("lOmPY"),import.meta.url).toString()})),o.register("lX0mA",(function(t,e){t.exports=new URL(o("kyEFX").resolve("i1sCD"),import.meta.url).toString()})),o.register("84bGB",(function(t,e){t.exports=new URL(o("kyEFX").resolve("1zCxK"),import.meta.url).toString()})),o.register("eq691",(function(t,e){t.exports=new URL(o("kyEFX").resolve("eiJlh"),import.meta.url).toString()})),o.register("4lLGQ",(function(t,e){t.exports=new URL(o("kyEFX").resolve("f90An"),import.meta.url).toString()})),o("kyEFX").register(JSON.parse('{"5ZPII":"index.f51bd8ac.js","15crv":"amazon@1x.626c9508.png","lOmPY":"amazon@2x.104a65be.png","i1sCD":"appleBooks@1x.652b354e.png","1zCxK":"appleBooks@2x.15632d7d.png","eiJlh":"booksAMillion@1x.e377c706.png","f90An":"booksAMillion@2x.62451a44.png","4jukI":"shopping-list-page.c7ad5d3e.js"}')),o("krGWQ");var i=o("2shzp"),l=o("krGWQ");function s(t){return t.map((t=>t.title.length<17?`<div class="book-card-wrapper" data-idbook="${t._id}"><a class="overlay link" href="#">\n            <img src="${t.book_image}" alt="${t.title}" height="256" loading="lazy"/> \n            <div class="overlay-field">\n              <p class="overlay-text">QUICK VIEW</p>\n            </div>\n            <p class="book-name">${t.title}</p>\n            <p class="book-author">${t.author}</p>\n          </a></div>`:`<div class="book-card-wrapper" data-idbook="${t._id}"><a class="overlay link" href="#">\n            <img src="${t.book_image}" alt="${t.title}" height="256" loading="lazy"/> \n            <div class="overlay-field">\n              <p class="overlay-text">QUICK VIEW</p>\n            </div>\n            <p class="book-name">${t.title.split("").slice(0,17).join("")}...</p>\n            <p class="book-author">${t.author}</p>\n          </a></div>`)).join("")}function r(t,e){l.default.mainGalleryEl.innerHTML="";let n=Math.trunc(e.split(" ").length/2);l.default.mainGalleryTitleEl.innerHTML=`${e.split(" ").splice(0,n).join(" ")} \n  <span class="category-title-span">${e.split(" ").splice(n,n).join(" ")}</span>`;let a="";a=s(t),l.default.mainGalleryEl.classList.add("gal-category"),l.default.mainGalleryEl.insertAdjacentHTML("beforeend",a)}function c(t){l.default.mainGalleryEl.classList.remove("gal-category"),l.default.mainGalleryTitleEl.innerHTML="Best Sellers <span class='category-title-span'>Books</span>",l.default.mainGalleryEl.innerHTML="";let e="";e=t.map((t=>window.innerWidth>=1440?`<div class="books-category">\n          <p class="books-category-title">${t.list_name}</p>\n          <ul>\n            <li class="books__list">${s(t.books)}</li>\n          </ul>\n          <button class="button-see-more" type="button" aria-label="button see more" data-cat="${t.list_name}">SEE MORE</button>\n        </div>`:window.innerWidth>=768?`<div class="books-category">\n          <p class="books-category-title">${t.list_name}</p>\n          <ul>\n            <li class="books__list">${s(t.books.slice(0,3))}</li>\n          </ul>\n          <button class="button-see-more" type="button" data-cat="${t.list_name}">SEE MORE</button>\n        </div>`:`<div class="books-category">\n          <p class="books-category-title">${t.list_name}</p>\n          <ul>\n            <li class="books__list">${s(t.books.slice(0,1))}</li>\n          </ul>\n          <button class="button-see-more" type="button" data-cat="${t.list_name}">SEE MORE</button>\n        </div>`)).join(""),l.default.mainGalleryEl.insertAdjacentHTML("beforeend",e)}l=o("krGWQ");async function d(){try{c((await i.default.get("https://books-backend.p.goit.global/books/top-books")).data),l.default.spinnerEl.setAttribute("hidden",!0)}catch(t){console.log(t)}}async function u(t){try{l.default.spinnerEl.removeAttribute("hidden");const e=await i.default.get(`https://books-backend.p.goit.global/books/category?category=${t}`);console.log(e.data),r(e.data,t),l.default.spinnerEl.setAttribute("hidden",!0)}catch(t){console.log(t)}}d(),l.default.mainGalleryEl.addEventListener("click",(function(t){t.target.dataset.cat&&u(t.target.dataset.cat)}));l=o("krGWQ");function p(t){t.parentNode.classList.add("active"),t.classList.add("category-active")}function f(t){for(let e=0;e<t.length;e++)t[e].classList.contains("active")&&(t[e].classList.remove("active"),t[e].firstChild.classList.remove("category-active"))}function g(){document.body.classList.toggle(".auth-form-open"),l.default.authFormBackdrop.classList.toggle("is-hidden")}function m(t){t.currentTarget===l.default.signUpFormBtn&&(l.default.signUpFormBtn.classList.add("active"),l.default.authSubmitBtn.dataset.login="signup",l.default.loginFormBtn.classList.remove("active"),l.default.nameInput.style.display="block",l.default.nameInput.disabled=!1,l.default.authSubmitBtn.textContent=l.default.signUpFormBtn.textContent),t.currentTarget===l.default.loginFormBtn&&(l.default.loginFormBtn.classList.add("active"),l.default.authSubmitBtn.dataset.login="login",l.default.signUpFormBtn.classList.remove("active"),l.default.nameInput.style.display="none",l.default.nameInput.disabled=!0,l.default.authSubmitBtn.textContent=l.default.loginFormBtn.textContent)}(async function(){return await i.default.get("https://books-backend.p.goit.global/books/category-list")})().then((async t=>{const e=t.data;if(0===e.length)return void(l.default.categoriesList.innerHTML='<li class="category-list-item"><p class="categories-err">The list of categories is empty</p></li>');const n='<li class="category-list-item active"><button type="button" aria-label="button all categories" class="category category-active">All categories</button></li>'+function(t){return t.map((({list_name:t})=>`<li class="category-list-item"><button type="button" class="category" aria-label="button categories book">${t}</button></li>`)).join("")}(e);l.default.categoriesList.innerHTML=n})).catch((t=>{l.default.categoriesList.innerHTML='<li class="category-list-item"><p class="categories-err">The list of categories is empty</p></li>'})),l.default.categoriesList.addEventListener("click",(function(t){const e=t.target,n=[...t.currentTarget.children];if(e.classList.contains("category")){if("All categories"===e.textContent)return f(n),p(e),void d();l.default.mainGalleryEl.innerHTML="",u(e.textContent)}e.classList.contains("category")&&(f(n),p(e))})),l.default.mainGalleryEl.addEventListener("click",(function(t){const e=t.target.dataset.cat,n=[...l.default.categoriesList.children];if(e)for(let t=0;t<n.length;t++)n[t].firstChild.textContent===e&&(f(n),p(n[t].firstChild))})),o("l74Nr"),(l=o("krGWQ")).default.userLoginBtn.addEventListener("click",g),l.default.authFormCloseBtn.addEventListener("click",g),l.default.signUpFormBtn.addEventListener("click",m),l.default.loginFormBtn.addEventListener("click",m),l.default.authSubmitBtn.dataset.login="signup";l=o("krGWQ");var h=o("eVVaU"),b=o("l74Nr");h=o("eVVaU");o("l74Nr"),l.default.authForm.addEventListener("submit",(async function(t){if(t.preventDefault(),"login"===l.default.authSubmitBtn.dataset.login)try{(0,h.loginAccount)().then((()=>{JSON.parse(localStorage.getItem(h.LOCAL_STORAGE_TOKEN))&&((0,b.hideAuthForm)(),l.default.authForm.reset())})).catch((t=>console.log(t.message)))}catch(t){console.log(t.message)}if("signup"===l.default.authSubmitBtn.dataset.login)try{(0,h.createAccount)().then((()=>{JSON.parse(localStorage.getItem(h.LOCAL_STORAGE_TOKEN))&&((0,b.hideAuthForm)(),l.default.authForm.reset())})).catch((t=>console.log(t.message)))}catch(t){return void console.log("user already registered")}})),o("eVVaU"),o("7KeNu"),o("8FnLx"),o("6ZtAl"),o("dTazW"),o("0PZIt");var k,v=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,E=/^0b[01]+$/i,L=/^0o[0-7]+$/i,_=parseInt,$="object"==typeof e&&e&&e.Object===Object&&e,x="object"==typeof self&&self&&self.Object===Object&&self,T=$||x||Function("return this")(),w=Object.prototype.toString,S=Math.max,A=Math.min,B=function(){return T.Date.now()};function H(t,e,n){var a,o,i,l,s,r,c=0,d=!1,u=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=a,i=o;return a=o=void 0,c=e,l=t.apply(i,n)}function g(t){return c=t,s=setTimeout(h,e),d?f(t):l}function m(t){var n=t-r;return void 0===r||n>=e||n<0||u&&t-c>=i}function h(){var t=B();if(m(t))return b(t);s=setTimeout(h,function(t){var n=e-(t-r);return u?A(n,i-(t-c)):n}(t))}function b(t){return s=void 0,p&&a?f(t):(a=o=void 0,l)}function k(){var t=B(),n=m(t);if(a=arguments,o=this,r=t,n){if(void 0===s)return g(r);if(u)return s=setTimeout(h,e),f(r)}return void 0===s&&(s=setTimeout(h,e)),l}return e=G(e)||0,F(n)&&(d=!!n.leading,i=(u="maxWait"in n)?S(G(n.maxWait)||0,e):i,p="trailing"in n?!!n.trailing:p),k.cancel=function(){void 0!==s&&clearTimeout(s),c=0,a=r=o=s=void 0},k.flush=function(){return void 0===s?l:b(B())},k}function F(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function G(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==w.call(t)}(t))return NaN;if(F(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=F(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(v,"");var n=E.test(t);return n||L.test(t)?_(t.slice(2),n?2:8):y.test(t)?NaN:+t}k=function(t,e,n){var a=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return F(n)&&(a="leading"in n?!!n.leading:a,o="trailing"in n?!!n.trailing:o),H(t,e,{leading:a,maxWait:e,trailing:o})};const O=document.querySelector(".scroll-up");O.addEventListener("click",(function(){window.scrollTo({top:0,left:0,behavior:"smooth"})})),window.addEventListener("scroll",t(k)((function(t){(window.scrollY||document.documentElement.scrollTop)>3e3?O.classList.remove("is-hidden"):O.classList.add("is-hidden")}),1e3));l=o("krGWQ"),i=o("2shzp"),l=o("krGWQ");function M(t){if(t.description){const e=`\n  <div class="wrapper-modal-data">\n  <img class="img" src="${t.book_image}" alt="${t.title}" height="256" loading="lazy"/>\n      <div>\n        <p class="modal-name">${t.title}</p>\n       <p class="modal-author">${t.author}</p>\n        <div class="description">\n          <p class="book-description">${t.description}</p>\n        </div>\n                     <ul class="shops-links-list">\n             <li class="shop-item">\n             <a href="${t.buy_links[0].url}" class="shop-item-link" target=_blank>\n             <img\n             class="shops-item-icon amazon-img"\n             srcset="\n             ${o("5UGx0")} 48w,\n             ${o("3DT0U")} 96w,\n             "\n             sizes="48px"\n              src="${o("5UGx0")}"\n              width="48" height="15"\n              alt="Amazon"\n              />\n              \n             </a>\n              </li>\n              <li class="shop-item">\n              <a href="${t.buy_links[1].url}" class="shop-item-link" target=_blank>\n               <img\n             class="shops-item-icon"\n             srcset="\n             ${o("lX0mA")} 28w,\n             ${o("84bGB")} 56w,\n             "\n             sizes="28px"\n              src="${o("lX0mA")}"\n              width="28" height="27"\n              alt="Apple Books"\n              />\n             </a>\n              </li>\n              <li class="shop-item">\n              <a href="${t.buy_links[4].url}" class="shop-item-link" target=_blank>\n               <img\n             class="shops-item-icon"\n             srcset="\n             ${o("eq691")} 32w,\n             ${o("4lLGQ")} 64w,\n             "sizes="32px"\n              src="${o("eq691")}"\n              width="32" height="30"\n              alt="Bookshop"\n              />\n                </a>\n                  </li>\n                  </ul>\n      </div>\n    </div>\n    `;l.default.wrapperBookEl.innerHTML=e}else{const e=`\n  <div class="wrapper-modal-data">\n  <img class="img" src="${t.book_image}" alt="${t.title}" height="256" loading="lazy"/>\n      <div>\n        <p class="modal-name">${t.title}</p>\n       <p class="modal-author">${t.author}</p>\n        <div class="description">\n          <p class="book-description">Unfortunately, this book has no description yet.</p>\n        </div>\n                     <ul class="shops-links-list">\n             <li class="shop-item">\n             <a href="${t.buy_links[0].url}" class="shop-item-link" target=_blank>\n             <img\n             class="shops-item-icon amazon-img"\n             srcset="\n             ${o("5UGx0")} 48w,\n             ${o("3DT0U")} 96w,\n             "\n             sizes="48px"\n              src="${o("5UGx0")}"\n              width="48" height="15"\n              alt="Amazon"\n              />\n              \n             </a>\n              </li>\n              <li class="shop-item">\n              <a href="${t.buy_links[1].url}" class="shop-item-link" target=_blank>\n               <img\n             class="shops-item-icon"\n             srcset="\n             ${o("lX0mA")} 28w,\n             ${o("84bGB")} 56w,\n             "\n             sizes="28px"\n              src="${o("lX0mA")}"\n              width="28" height="27"\n              alt="Apple Books"\n              />\n             </a>\n              </li>\n              <li class="shop-item">\n              <a href="${t.buy_links[4].url}" class="shop-item-link" target=_blank>\n               <img\n             class="shops-item-icon"\n             srcset="\n             ${o("eq691")} 32w,\n             ${o("4lLGQ")} 64w,\n             "sizes="32px"\n              src="${o("eq691")}"\n              width="32" height="30"\n              alt="Bookshop"\n              />\n                </a>\n                  </li>\n                  </ul>\n      </div>\n    </div>\n    `;l.default.wrapperBookEl.innerHTML=e}}let I=[],R=[],U=[];function C(){l.default.buttonAddBookEl.removeEventListener("click",C),l.default.addedTextEl.innerHTML='<p class="added-text">Сongratulations! You have added the book to the shopping list. To delete, press the button "Remove from the shopping list".</p>',l.default.buttonAddBookEl.textContent="REMOVE FROM THE SHOPPING LIST",I.push(R[0]),console.log("Кількість книг після додавання = "+I.length),localStorage.setItem("books-data",JSON.stringify(I)),j()}function N(){l.default.buttonAddBookEl.removeEventListener("click",N),l.default.addedTextEl.innerHTML="",l.default.buttonAddBookEl.textContent="ADD TO SHOPPING LIST";const t=I.findIndex((t=>t._id===U[0]));I.splice(t,1),console.log("Кількість книг після видалення = "+I.length),localStorage.setItem("books-data",JSON.stringify(I)),j()}function j(){l.default.modalCloseBtn.removeEventListener("click",j),l.default.modal.classList.add("is-hidden")}l.default.mainGalleryEl.addEventListener("click",(function(t){U=[];const e=t.target.closest(".book-card-wrapper"),n=e.dataset.idbook;if(!e)return;U.push(n),function(t){l.default.wrapperBookEl.innerHTML="",l.default.modalCloseBtn.addEventListener("click",j),l.default.modal.classList.remove("is-hidden"),async function(t){try{const e=await i.default.get(`https://books-backend.p.goit.global/books/${t}`);M(e.data),function({_id:t,book_image:e,title:n,list_name:a,description:o,author:i,buy_links:l}){R=[];const s={_id:t,book_image:e,title:n,list_name:a,description:o,author:i,buy_links:l};R.push(s)}(e.data)}catch(t){console.log(t)}}(t),I.some((e=>e._id===t))?(l.default.addedTextEl.innerHTML='<p class="added-text">Сongratulations! You have added the book to the shopping list. To delete, press the button "Remove from the shopping list".</p>',l.default.buttonAddBookEl.textContent="REMOVE FROM THE SHOPPING LIST",l.default.buttonAddBookEl.addEventListener("click",N)):(l.default.buttonAddBookEl.textContent="ADD TO SHOPPING LIST",l.default.addedTextEl.innerHTML="",l.default.buttonAddBookEl.addEventListener("click",C))}(n)})),localStorage.getItem("books-data")&&(I=JSON.parse(localStorage.getItem("books-data")));
//# sourceMappingURL=index.f51bd8ac.js.map
