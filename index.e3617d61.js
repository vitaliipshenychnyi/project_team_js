function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},a=e.parcelRequired7c6;null==a&&((a=function(t){if(t in n)return n[t].exports;if(t in i){var e=i[t];delete i[t];var a={id:t,exports:{}};return n[t]=a,e.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},e.parcelRequired7c6=a),a.register("5UGx0",(function(t,e){t.exports=new URL(a("kyEFX").resolve("15crv"),import.meta.url).toString()})),a.register("3DT0U",(function(t,e){t.exports=new URL(a("kyEFX").resolve("lOmPY"),import.meta.url).toString()})),a.register("lX0mA",(function(t,e){t.exports=new URL(a("kyEFX").resolve("i1sCD"),import.meta.url).toString()})),a.register("84bGB",(function(t,e){t.exports=new URL(a("kyEFX").resolve("1zCxK"),import.meta.url).toString()})),a.register("eq691",(function(t,e){t.exports=new URL(a("kyEFX").resolve("eiJlh"),import.meta.url).toString()})),a.register("4lLGQ",(function(t,e){t.exports=new URL(a("kyEFX").resolve("f90An"),import.meta.url).toString()})),a("kyEFX").register(JSON.parse('{"5ZPII":"index.e3617d61.js","15crv":"amazon@1x.626c9508.png","lOmPY":"amazon@2x.104a65be.png","i1sCD":"appleBooks@1x.652b354e.png","1zCxK":"appleBooks@2x.15632d7d.png","eiJlh":"booksAMillion@1x.e377c706.png","f90An":"booksAMillion@2x.62451a44.png","4jukI":"shopping-list-page.c85d963b.js"}')),a("krGWQ");var o=a("2shzp"),l=a("krGWQ");function s(t){return t.map((t=>t.title.length<17?`<div class="book-card-wrapper" data-idbook="${t._id}"><a class="overlay link" href="#">\n            <img src="${t.book_image}" alt="${t.title}" height="256" loading="lazy"/> \n            <div class="overlay-field">\n              <p class="overlay-text">QUICK VIEW</p>\n            </div>\n            <p class="book-name">${t.title}</p>\n            <p class="book-author">${t.author}</p>\n          </a></div>`:`<div class="book-card-wrapper" data-idbook="${t._id}"><a class="overlay link" href="#">\n            <img src="${t.book_image}" alt="${t.title}" height="256" loading="lazy"/> \n            <div class="overlay-field">\n              <p class="overlay-text">QUICK VIEW</p>\n            </div>\n            <p class="book-name">${t.title.split("").slice(0,17).join("")}...</p>\n            <p class="book-author">${t.author}</p>\n          </a></div>`)).join("")}function r(t,e){l.default.mainGalleryEl.innerHTML="";let n=Math.trunc(e.split(" ").length/2);l.default.mainGalleryTitleEl.innerHTML=`${e.split(" ").splice(0,n).join(" ")} \n  <span class="category-title-span">${e.split(" ").splice(n,n).join(" ")}</span>`;let i="";i=s(t),l.default.mainGalleryEl.classList.add("gal-category"),l.default.mainGalleryEl.insertAdjacentHTML("beforeend",i)}function c(t){l.default.mainGalleryEl.classList.remove("gal-category"),l.default.mainGalleryTitleEl.innerHTML="Best Sellers <span class='category-title-span'>Books</span>",l.default.mainGalleryEl.innerHTML="";let e="";e=t.map((t=>window.innerWidth>=1440?`<div class="books-category">\n          <p class="books-category-title">${t.list_name}</p>\n          <ul">\n            <li class="books__list">${s(t.books)}</li>\n          </ul>\n          <button class="button-see-more" type="button" data-cat="${t.list_name}">SEE MORE</button>\n        </div>`:window.innerWidth>=768?`<div class="books-category">\n          <p class="books-category-title">${t.list_name}</p>\n          <ul">\n            <li class="books__list">${s(t.books.slice(0,3))}</li>\n          </ul>\n          <button class="button-see-more" type="button" data-cat="${t.list_name}">SEE MORE</button>\n        </div>`:`<div class="books-category">\n          <p class="books-category-title">${t.list_name}</p>\n          <ul">\n            <li class="books__list">${s(t.books.slice(0,1))}</li>\n          </ul>\n          <button class="button-see-more" type="button" data-cat="${t.list_name}">SEE MORE</button>\n        </div>`)).join(""),l.default.mainGalleryEl.insertAdjacentHTML("beforeend",e)}l=a("krGWQ");async function d(){try{c((await o.default.get("https://books-backend.p.goit.global/books/top-books")).data),l.default.spinnerEl.setAttribute("hidden",!0)}catch(t){console.log(t)}}async function u(t){try{l.default.spinnerEl.removeAttribute("hidden");const e=await o.default.get(`https://books-backend.p.goit.global/books/category?category=${t}`);console.log(e.data),r(e.data,t),l.default.spinnerEl.setAttribute("hidden",!0)}catch(t){console.log(t)}}d(),l.default.mainGalleryEl.addEventListener("click",(function(t){t.target.dataset.cat&&u(t.target.dataset.cat)}));l=a("krGWQ");function f(t){t.parentNode.classList.add("active"),t.classList.add("category-active")}function p(t){for(let e=0;e<t.length;e++)t[e].classList.contains("active")&&(t[e].classList.remove("active"),t[e].firstChild.classList.remove("category-active"))}function g(){document.body.classList.toggle(".auth-form-open"),l.default.authFormBackdrop.classList.toggle("is-hidden")}function m(t){t.currentTarget===l.default.signUpFormBtn&&(l.default.signUpFormBtn.classList.add("active"),l.default.authSubmitBtn.dataset.login="signup",l.default.loginFormBtn.classList.remove("active"),l.default.nameInput.style.display="block",l.default.nameInput.disabled=!1,l.default.authSubmitBtn.textContent=l.default.signUpFormBtn.textContent),t.currentTarget===l.default.loginFormBtn&&(l.default.loginFormBtn.classList.add("active"),l.default.authSubmitBtn.dataset.login="login",l.default.signUpFormBtn.classList.remove("active"),l.default.nameInput.style.display="none",l.default.nameInput.disabled=!0,l.default.authSubmitBtn.textContent=l.default.loginFormBtn.textContent)}(async function(){return await o.default.get("https://books-backend.p.goit.global/books/category-list")})().then((async t=>{const e=t.data;if(0===e.length)return void(l.default.categoriesList.innerHTML='<li class="category-list-item"><p class="categories-err">The list of categories is empty</p></li>');const n='<li class="category-list-item active"><button type="button" class="category category-active">All categories</button></li>'+function(t){return t.map((({list_name:t})=>`<li class="category-list-item"><button type="button" class="category">${t}</button></li>`)).join("")}(e);l.default.categoriesList.innerHTML=n})).catch((t=>{l.default.categoriesList.innerHTML='<li class="category-list-item"><p class="categories-err">The list of categories is empty</p></li>'})),l.default.categoriesList.addEventListener("click",(function(t){const e=t.target,n=[...t.currentTarget.children];if(e.classList.contains("category")){if("All categories"===e.textContent)return p(n),f(e),void d();l.default.mainGalleryEl.innerHTML="",u(e.textContent)}e.classList.contains("category")&&(p(n),f(e))})),l.default.mainGalleryEl.addEventListener("click",(function(t){const e=t.target.dataset.cat,n=[...l.default.categoriesList.children];if(e)for(let t=0;t<n.length;t++)n[t].firstChild.textContent===e&&(p(n),f(n[t].firstChild))})),(l=a("krGWQ")).default.userLoginBtn.addEventListener("click",g),l.default.authFormCloseBtn.addEventListener("click",g),l.default.signUpFormBtn.addEventListener("click",m),l.default.loginFormBtn.addEventListener("click",m),l.default.authSubmitBtn.dataset.login="signup";l=a("krGWQ");var h=a("eVVaU"),b=a("l74Nr");l.default.authForm.addEventListener("submit",(async function(t){if(t.preventDefault(),"login"===l.default.authSubmitBtn.dataset.login)try{(0,h.loginAccount)().then((()=>{(0,b.hideAuthForm)(),l.default.authForm.reset()})).catch().finally()}catch(t){console.log(t.message)}if("signup"===l.default.authSubmitBtn.dataset.login)try{(0,h.createAccount)().then((()=>{(0,b.hideAuthForm)(),l.default.authForm.reset()}))}catch(t){return void console.log("user already registered")}})),a("7KeNu"),a("8FnLx"),a("6ZtAl"),a("dTazW"),a("0PZIt");var k,v=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,E=/^0b[01]+$/i,L=/^0o[0-7]+$/i,$=parseInt,_="object"==typeof e&&e&&e.Object===Object&&e,x="object"==typeof self&&self&&self.Object===Object&&self,w=_||x||Function("return this")(),T=Object.prototype.toString,B=Math.max,A=Math.min,S=function(){return w.Date.now()};function H(t,e,n){var i,a,o,l,s,r,c=0,d=!1,u=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=i,o=a;return i=a=void 0,c=e,l=t.apply(o,n)}function g(t){return c=t,s=setTimeout(h,e),d?p(t):l}function m(t){var n=t-r;return void 0===r||n>=e||n<0||u&&t-c>=o}function h(){var t=S();if(m(t))return b(t);s=setTimeout(h,function(t){var n=e-(t-r);return u?A(n,o-(t-c)):n}(t))}function b(t){return s=void 0,f&&i?p(t):(i=a=void 0,l)}function k(){var t=S(),n=m(t);if(i=arguments,a=this,r=t,n){if(void 0===s)return g(r);if(u)return s=setTimeout(h,e),p(r)}return void 0===s&&(s=setTimeout(h,e)),l}return e=G(e)||0,F(n)&&(d=!!n.leading,o=(u="maxWait"in n)?B(G(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f),k.cancel=function(){void 0!==s&&clearTimeout(s),c=0,i=r=a=s=void 0},k.flush=function(){return void 0===s?l:b(S())},k}function F(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function G(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==T.call(t)}(t))return NaN;if(F(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=F(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(v,"");var n=E.test(t);return n||L.test(t)?$(t.slice(2),n?2:8):y.test(t)?NaN:+t}k=function(t,e,n){var i=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return F(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),H(t,e,{leading:i,maxWait:e,trailing:a})};const M=document.querySelector(".scroll-up");M.addEventListener("click",(function(){window.scrollTo({top:0,left:0,behavior:"smooth"})})),window.addEventListener("scroll",t(k)((function(t){(window.scrollY||document.documentElement.scrollTop)>3e3?M.classList.remove("is-hidden"):M.classList.add("is-hidden")}),1e3)),a("eVVaU"),a("l74Nr");l=a("krGWQ"),o=a("2shzp");let O=[],I={};function U(){l.default.buttonAddBookEl.removeEventListener("click",U),l.default.buttonAddBookEl.addEventListener("click",R),l.default.addedTextEl.innerHTML='<p class="added-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>',l.default.buttonAddBookEl.textContent="REMOVE FROM THE SHOPPING LIST",O.push(I),localStorage.setItem("books-data",JSON.stringify(O))}function R(t){l.default.buttonAddBookEl.removeEventListener("click",R),l.default.buttonAddBookEl.addEventListener("click",U),l.default.addedTextEl.innerHTML="",l.default.buttonAddBookEl.textContent="ADD TO SHOPPING LIST",console.log("before ="+O);const e=O.findIndex((e=>e._id===t));O.splice(e,1),localStorage.setItem("books-data",JSON.stringify(O))}function C(){l.default.modalCloseBtn.removeEventListener("click",C),l.default.buttonAddBookEl.removeEventListener("click",U),l.default.wrapperBookEl.innerHTML="",l.default.addedTextEl.innerHTML="",l.default.modal.classList.add("is-hidden")}l.default.mainGalleryEl.addEventListener("click",(function(t){const e=t.target.closest(".book-card-wrapper");let n=e.dataset.idbook;if(!e)return;!function(t){l.default.modalCloseBtn.addEventListener("click",C),l.default.modal.classList.remove("is-hidden"),async function(t){try{const e=await o.default.get(`https://books-backend.p.goit.global/books/${t}`);!function(t){if(t.description){const e=`\n  <div class="wrapper-modal-data">\n  <img class="img" src="${t.book_image}" alt="${t.title}" height="256" loading="lazy"/>\n      <div>\n        <p class="modal-name">${t.title}</p>\n       <p class="modal-author">${t.author}</p>\n        <div class="description">\n          <p class="book-description">${t.description}</p>\n        </div>\n                     <ul class="shops-links-list">\n             <li class="shop-item">\n             <a href="${t.buy_links[0].url}" class="shop-item-link" target=_blank>\n             <img\n             class="shops-item-icon"\n             srcset="\n             ${a("5UGx0")} 48w,\n             ${a("3DT0U")} 96w,\n             "\n             sizes="48px"\n              src="${a("5UGx0")}"\n              width="48" height="15"\n              alt="Amazon"\n              />\n              \n             </a>\n              </li>\n              <li class="shop-item">\n              <a href="${t.buy_links[1].url}" class="shop-item-link" target=_blank>\n               <img\n             class="shops-item-icon"\n             srcset="\n             ${a("lX0mA")} 28w,\n             ${a("84bGB")} 56w,\n             "\n             sizes="28px"\n              src="${a("lX0mA")}"\n              width="28" height="27"\n              alt="Apple Books"\n              />\n             </a>\n              </li>\n              <li class="shop-item">\n              <a href="${t.buy_links[4].url}" class="shop-item-link" target=_blank>\n               <img\n             class="shops-item-icon"\n             srcset="\n             ${a("eq691")} 32w,\n             ${a("4lLGQ")} 64w,\n             "sizes="32px"\n              src="${a("eq691")}"\n              width="32" height="30"\n              alt="Bookshop"\n              />\n                </a>\n                  </li>\n                  </ul>\n      </div>\n    </div>\n    `;l.default.wrapperBookEl.innerHTML=e}else{const e=`\n  <div class="wrapper-modal-data">\n  <img class="img" src="${t.book_image}" alt="${t.title}" height="256" loading="lazy"/>\n      <div>\n        <p class="modal-name">${t.title}</p>\n       <p class="modal-author">${t.author}</p>\n        <div class="description">\n          <p class="book-description">Unfortunately, this book has no description yet.</p>\n        </div>\n                     <ul class="shops-links-list">\n             <li class="shop-item">\n             <a href="${t.buy_links[0].url}" class="shop-item-link" target=_blank>\n             <img\n             class="shops-item-icon"\n             srcset="\n             ${a("5UGx0")} 48w,\n             ${a("3DT0U")} 96w,\n             "\n             sizes="48px"\n              src="${a("5UGx0")}"\n              width="48" height="15"\n              alt="Amazon"\n              />\n              \n             </a>\n              </li>\n              <li class="shop-item">\n              <a href="${t.buy_links[1].url}" class="shop-item-link" target=_blank>\n               <img\n             class="shops-item-icon"\n             srcset="\n             ${a("lX0mA")} 28w,\n             ${a("84bGB")} 56w,\n             "\n             sizes="28px"\n              src="${a("lX0mA")}"\n              width="28" height="27"\n              alt="Apple Books"\n              />\n             </a>\n              </li>\n              <li class="shop-item">\n              <a href="${t.buy_links[4].url}" class="shop-item-link" target=_blank>\n               <img\n             class="shops-item-icon"\n             srcset="\n             ${a("eq691")} 32w,\n             ${a("4lLGQ")} 64w,\n             "sizes="32px"\n              src="${a("eq691")}"\n              width="32" height="30"\n              alt="Bookshop"\n              />\n                </a>\n                  </li>\n                  </ul>\n      </div>\n    </div>\n    `;l.default.wrapperBookEl.innerHTML=e}}(e.data),function({_id:t,book_image:e,title:n,list_name:i,description:a,author:o,buy_links:l}){I={_id:t,book_image:e,title:n,list_name:i,description:a,author:o,buy_links:l}}(e.data)}catch(t){console.log(t)}}(t),O.some((e=>e._id===t))?(l.default.addedTextEl.innerHTML='<p class="added-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>',l.default.buttonAddBookEl.textContent="REMOVE FROM THE SHOPPING LIST",l.default.buttonAddBookEl.addEventListener("click",R)):(l.default.buttonAddBookEl.textContent="ADD TO SHOPPING LIST",l.default.buttonAddBookEl.addEventListener("click",U))}(n)})),localStorage.getItem("books-data")&&(O=JSON.parse(localStorage.getItem("books-data")));
//# sourceMappingURL=index.e3617d61.js.map
