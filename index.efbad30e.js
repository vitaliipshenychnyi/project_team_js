!function(){function t(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},a={},o=n.parcelRequired7c6;null==o&&((o=function(t){if(t in e)return e[t].exports;if(t in a){var n=a[t];delete a[t];var o={id:t,exports:{}};return e[t]=o,n.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,n){a[t]=n},n.parcelRequired7c6=o),o.register("367HF",(function(t,n){t.exports=o("aNJCr").getBundleURL("EVgbq")+o("iE7OH").resolve("fT3Hh")})),o.register("3tx0H",(function(t,n){t.exports=o("aNJCr").getBundleURL("EVgbq")+o("iE7OH").resolve("6yAj5")})),o.register("aKRM2",(function(t,n){t.exports=o("aNJCr").getBundleURL("EVgbq")+o("iE7OH").resolve("9lVRR")})),o.register("fL90f",(function(t,n){t.exports=o("aNJCr").getBundleURL("EVgbq")+o("iE7OH").resolve("gVIRL")})),o.register("2Jq4B",(function(t,n){t.exports=o("aNJCr").getBundleURL("EVgbq")+o("iE7OH").resolve("9J3Vm")})),o.register("pLbh9",(function(t,n){t.exports=o("aNJCr").getBundleURL("EVgbq")+o("iE7OH").resolve("9tERu")})),o("iE7OH").register(JSON.parse('{"EVgbq":"index.efbad30e.js","fT3Hh":"amazon@1x.626c9508.png","6yAj5":"amazon@2x.104a65be.png","9lVRR":"appleBooks@1x.652b354e.png","gVIRL":"appleBooks@2x.15632d7d.png","9J3Vm":"booksAMillion@1x.e377c706.png","9tERu":"booksAMillion@2x.62451a44.png","1Vwc0":"shopping-list-page.c09190bf.js"}')),o("4Nugj");var i=o("bpxeT"),s=o("8nrFW"),l=o("2TvXO"),r=(i=o("bpxeT"),l=o("2TvXO"),o("dIxxU")),c=o("4Nugj");function u(t){return t.map((function(t){return t.title.length<17?'<div class="book-card-wrapper" data-idbook="'.concat(t._id,'"><a class="overlay link" href="#">\n            <img src="').concat(t.book_image,'" alt="').concat(t.title,'" height="256" loading="lazy"/> \n            <div class="overlay-field">\n              <p class="overlay-text">QUICK VIEW</p>\n            </div>\n            <p class="book-name">').concat(t.title,'</p>\n            <p class="book-author">').concat(t.author,"</p>\n          </a></div>"):'<div class="book-card-wrapper" data-idbook="'.concat(t._id,'"><a class="overlay link" href="#">\n            <img src="').concat(t.book_image,'" alt="').concat(t.title,'" height="256" loading="lazy"/> \n            <div class="overlay-field">\n              <p class="overlay-text">QUICK VIEW</p>\n            </div>\n            <p class="book-name">').concat(t.title.split("").slice(0,17).join(""),'...</p>\n            <p class="book-author">').concat(t.author,"</p>\n          </a></div>")})).join("")}function d(t,n){c.default.mainGalleryEl.innerHTML="";var e=Math.trunc(n.split(" ").length/2);c.default.mainGalleryTitleEl.innerHTML="".concat(n.split(" ").splice(0,e).join(" "),' \n  <span class="category-title-span">').concat(n.split(" ").splice(e,e).join(" "),"</span>");var a;a=u(t),c.default.mainGalleryEl.classList.add("gal-category"),c.default.mainGalleryEl.insertAdjacentHTML("beforeend",a)}function p(t){c.default.mainGalleryEl.classList.remove("gal-category"),c.default.mainGalleryTitleEl.innerHTML="Best Sellers <span class='category-title-span'>Books</span>",c.default.mainGalleryEl.innerHTML="";var n;n=t.map((function(t){return window.innerWidth>=1440?'<div class="books-category">\n          <p class="books-category-title">'.concat(t.list_name,'</p>\n          <ul">\n            <li class="books__list">').concat(u(t.books),'</li>\n          </ul>\n          <button class="button-see-more" type="button" data-cat="').concat(t.list_name,'">SEE MORE</button>\n        </div>'):window.innerWidth>=768?'<div class="books-category">\n          <p class="books-category-title">'.concat(t.list_name,'</p>\n          <ul">\n            <li class="books__list">').concat(u(t.books.slice(0,3)),'</li>\n          </ul>\n          <button class="button-see-more" type="button" data-cat="').concat(t.list_name,'">SEE MORE</button>\n        </div>'):'<div class="books-category">\n          <p class="books-category-title">'.concat(t.list_name,'</p>\n          <ul">\n            <li class="books__list">').concat(u(t.books.slice(0,1)),'</li>\n          </ul>\n          <button class="button-see-more" type="button" data-cat="').concat(t.list_name,'">SEE MORE</button>\n        </div>')})).join(""),c.default.mainGalleryEl.insertAdjacentHTML("beforeend",n)}c=o("4Nugj");var f="https://books-backend.p.goit.global/books/";function g(){return h.apply(this,arguments)}function h(){return(h=t(i)(t(l).mark((function n(){return t(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.default.get("".concat(f,"top-books"));case 3:p(t.sent.data),c.default.spinnerEl.setAttribute("hidden",!0),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),n,null,[[0,8]])})))).apply(this,arguments)}function b(t){return m.apply(this,arguments)}function m(){return(m=t(i)(t(l).mark((function n(e){var a;return t(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c.default.spinnerEl.removeAttribute("hidden"),t.next=4,r.default.get("".concat(f,"category?category=").concat(e));case 4:a=t.sent,console.log(a.data),d(a.data,e),c.default.spinnerEl.setAttribute("hidden",!0),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),n,null,[[0,10]])})))).apply(this,arguments)}function v(){return(v=t(i)(t(l).mark((function n(){return t(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.get("".concat(f,"category-list"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),n)})))).apply(this,arguments)}g(),c.default.mainGalleryEl.addEventListener("click",(function(t){t.target.dataset.cat&&b(t.target.dataset.cat)}));c=o("4Nugj");function k(t){return t.map((function(t){var n=t.list_name;return'<li class="category-list-item"><button type="button" class="category">'.concat(n,"</button></li>")})).join("")}var y,E='<li class="category-list-item"><p class="categories-err">The list of categories is empty</p></li>';function L(t){t.parentNode.classList.add("active"),t.classList.add("category-active")}function x(t){for(var n=0;n<t.length;n++)t[n].classList.contains("active")&&(t[n].classList.remove("active"),t[n].firstChild.classList.remove("category-active"))}function w(){document.body.classList.toggle(".auth-form-open"),c.default.authFormBackdrop.classList.toggle("is-hidden")}function T(t){t.currentTarget===c.default.signUpFormBtn&&(c.default.signUpFormBtn.classList.add("active"),c.default.authSubmitBtn.dataset.login="signup",c.default.loginFormBtn.classList.remove("active"),c.default.nameInput.style.display="block",c.default.nameInput.disabled=!1,c.default.authSubmitBtn.textContent=c.default.signUpFormBtn.textContent),t.currentTarget===c.default.loginFormBtn&&(c.default.loginFormBtn.classList.add("active"),c.default.authSubmitBtn.dataset.login="login",c.default.signUpFormBtn.classList.remove("active"),c.default.nameInput.style.display="none",c.default.nameInput.disabled=!0,c.default.authSubmitBtn.textContent=c.default.loginFormBtn.textContent)}(function(){return v.apply(this,arguments)})().then((y=t(i)(t(l).mark((function n(e){var a,o;return t(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(a=e.data).length){t.next=4;break}return c.default.categoriesList.innerHTML=E,t.abrupt("return");case 4:o='<li class="category-list-item active"><button type="button" class="category category-active">All categories</button></li>'+k(a),c.default.categoriesList.innerHTML=o;case 6:case"end":return t.stop()}}),n)}))),function(t){return y.apply(this,arguments)})).catch((function(t){c.default.categoriesList.innerHTML=E})),c.default.categoriesList.addEventListener("click",(function(n){var e=n.target,a=t(s)(n.currentTarget.children);if(e.classList.contains("category")){if("All categories"===e.textContent)return x(a),L(e),void g();c.default.mainGalleryEl.innerHTML="",b(e.textContent)}e.classList.contains("category")&&(x(a),L(e))})),c.default.mainGalleryEl.addEventListener("click",(function(n){var e=n.target.dataset.cat,a=t(s)(c.default.categoriesList.children);if(e)for(var o=0;o<a.length;o++)a[o].firstChild.textContent===e&&(x(a),L(a[o].firstChild))})),(c=o("4Nugj")).default.userLoginBtn.addEventListener("click",w),c.default.authFormCloseBtn.addEventListener("click",w),c.default.signUpFormBtn.addEventListener("click",T),c.default.loginFormBtn.addEventListener("click",T),c.default.authSubmitBtn.dataset.login="signup";i=o("bpxeT"),l=o("2TvXO"),c=o("4Nugj");var _=o("9wf5v"),B=o("lgQb1");function H(){return(H=t(i)(t(l).mark((function n(e){return t(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),"login"===c.default.authSubmitBtn.dataset.login)try{(0,_.loginAccount)().then((function(){(0,B.hideAuthForm)(),c.default.authForm.reset()})).catch().finally()}catch(t){console.log(t.message)}if("signup"!==c.default.authSubmitBtn.dataset.login){t.next=11;break}t.prev=3,(0,_.createAccount)().then((function(){(0,B.hideAuthForm)(),c.default.authForm.reset()})),t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(3),console.log("user already registered"),t.abrupt("return");case 11:case"end":return t.stop()}}),n,null,[[3,7]])})))).apply(this,arguments)}c.default.authForm.addEventListener("submit",(function(t){return H.apply(this,arguments)})),o("5nHy8"),o("cs7FV"),o("bTwnY"),o("xpKCW"),o("hfTVu");var A,O=o("l5bVx"),R="Expected a function",S=/^\s+|\s+$/g,F=/^[-+]0x[0-9a-f]+$/i,M=/^0b[01]+$/i,j=/^0o[0-7]+$/i,N=parseInt,C="object"==typeof n&&n&&n.Object===Object&&n,I="object"==typeof self&&self&&self.Object===Object&&self,V=C||I||Function("return this")(),U=Object.prototype.toString,J=Math.max,G=Math.min,q=function(){return V.Date.now()};function z(t,n,e){var a,o,i,s,l,r,c=0,u=!1,d=!1,p=!0;if("function"!=typeof t)throw new TypeError(R);function f(n){var e=a,i=o;return a=o=void 0,c=n,s=t.apply(i,e)}function g(t){return c=t,l=setTimeout(b,n),u?f(t):s}function h(t){var e=t-r;return void 0===r||e>=n||e<0||d&&t-c>=i}function b(){var t=q();if(h(t))return m(t);l=setTimeout(b,function(t){var e=n-(t-r);return d?G(e,i-(t-c)):e}(t))}function m(t){return l=void 0,p&&a?f(t):(a=o=void 0,s)}function v(){var t=q(),e=h(t);if(a=arguments,o=this,r=t,e){if(void 0===l)return g(r);if(d)return l=setTimeout(b,n),f(r)}return void 0===l&&(l=setTimeout(b,n)),s}return n=D(n)||0,W(e)&&(u=!!e.leading,i=(d="maxWait"in e)?J(D(e.maxWait)||0,n):i,p="trailing"in e?!!e.trailing:p),v.cancel=function(){void 0!==l&&clearTimeout(l),c=0,a=r=o=l=void 0},v.flush=function(){return void 0===l?s:m(q())},v}function W(n){var e=void 0===n?"undefined":t(O)(n);return!!n&&("object"==e||"function"==e)}function D(n){if("number"==typeof n)return n;if(function(n){return"symbol"==(void 0===n?"undefined":t(O)(n))||function(t){return!!t&&"object"==typeof t}(n)&&"[object Symbol]"==U.call(n)}(n))return NaN;if(W(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=W(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(S,"");var a=M.test(n);return a||j.test(n)?N(n.slice(2),a?2:8):F.test(n)?NaN:+n}A=function(t,n,e){var a=!0,o=!0;if("function"!=typeof t)throw new TypeError(R);return W(e)&&(a="leading"in e?!!e.leading:a,o="trailing"in e?!!e.trailing:o),z(t,n,{leading:a,maxWait:n,trailing:o})};var K=document.querySelector(".scroll-up");K.addEventListener("click",(function(){window.scrollTo({top:0,left:0,behavior:"smooth"})})),window.addEventListener("scroll",t(A)((function(t){(window.scrollY||document.documentElement.scrollTop)>3e3?K.classList.remove("is-hidden"):K.classList.add("is-hidden")}),1e3)),o("9wf5v"),o("lgQb1");i=o("bpxeT"),l=o("2TvXO"),c=o("4Nugj"),r=o("dIxxU");var P=[];function Q(){return(Q=t(i)(t(l).mark((function n(e){var a;return t(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.default.get("https://books-backend.p.goit.global/books/".concat(e));case 3:X((a=t.sent).data),Y(a.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),n,null,[[0,8]])})))).apply(this,arguments)}function X(t){if(t.description){var n='\n  <div class="wrapper-modal-data">\n  <img class="img" src="'.concat(t.book_image,'" alt="').concat(t.title,'" height="256" loading="lazy"/>\n      <div>\n        <p class="modal-name">').concat(t.title,'</p>\n       <p class="modal-author">').concat(t.author,'</p>\n        <div class="description">\n          <p class="book-description">').concat(t.description,'</p>\n        </div>\n                     <ul class="shops-links-list">\n             <li class="shop-item">\n             <a href="').concat(t.buy_links[0].url,'" class="shop-item-link" target=_blank>\n             <img\n             class="shops-item-icon"\n             srcset="\n             ').concat(o("367HF")," 48w,\n             ").concat(o("3tx0H"),' 96w,\n             "\n             sizes="48px"\n              src="').concat(o("367HF"),'"\n              width="48" height="15"\n              alt="Amazon"\n              />\n              \n             </a>\n              </li>\n              <li class="shop-item">\n              <a href="').concat(t.buy_links[1].url,'" class="shop-item-link" target=_blank>\n               <img\n             class="shops-item-icon"\n             srcset="\n             ').concat(o("aKRM2")," 28w,\n             ").concat(o("fL90f"),' 56w,\n             "\n             sizes="28px"\n              src="').concat(o("aKRM2"),'"\n              width="28" height="27"\n              alt="Apple Books"\n              />\n             </a>\n              </li>\n              <li class="shop-item">\n              <a href="').concat(t.buy_links[4].url,'" class="shop-item-link" target=_blank>\n               <img\n             class="shops-item-icon"\n             srcset="\n             ').concat(o("2Jq4B")," 32w,\n             ").concat(o("pLbh9"),' 64w,\n             "sizes="32px"\n              src="').concat(o("2Jq4B"),'"\n              width="32" height="30"\n              alt="Bookshop"\n              />\n                </a>\n                  </li>\n                  </ul>\n      </div>\n    </div>\n    ');c.default.wrapperBookEl.innerHTML=n}else{var e='\n  <div class="wrapper-modal-data">\n  <img class="img" src="'.concat(t.book_image,'" alt="').concat(t.title,'" height="256" loading="lazy"/>\n      <div>\n        <p class="modal-name">').concat(t.title,'</p>\n       <p class="modal-author">').concat(t.author,'</p>\n        <div class="description">\n          <p class="book-description">Unfortunately, this book has no description yet.</p>\n        </div>\n                     <ul class="shops-links-list">\n             <li class="shop-item">\n             <a href="').concat(t.buy_links[0].url,'" class="shop-item-link" target=_blank>\n             <img\n             class="shops-item-icon"\n             srcset="\n             ').concat(o("367HF")," 48w,\n             ").concat(o("3tx0H"),' 96w,\n             "\n             sizes="48px"\n              src="').concat(o("367HF"),'"\n              width="48" height="15"\n              alt="Amazon"\n              />\n              \n             </a>\n              </li>\n              <li class="shop-item">\n              <a href="').concat(t.buy_links[1].url,'" class="shop-item-link" target=_blank>\n               <img\n             class="shops-item-icon"\n             srcset="\n             ').concat(o("aKRM2")," 28w,\n             ").concat(o("fL90f"),' 56w,\n             "\n             sizes="28px"\n              src="').concat(o("aKRM2"),'"\n              width="28" height="27"\n              alt="Apple Books"\n              />\n             </a>\n              </li>\n              <li class="shop-item">\n              <a href="').concat(t.buy_links[4].url,'" class="shop-item-link" target=_blank>\n               <img\n             class="shops-item-icon"\n             srcset="\n             ').concat(o("2Jq4B")," 32w,\n             ").concat(o("pLbh9"),' 64w,\n             "sizes="32px"\n              src="').concat(o("2Jq4B"),'"\n              width="32" height="30"\n              alt="Bookshop"\n              />\n                </a>\n                  </li>\n                  </ul>\n      </div>\n    </div>\n    ');c.default.wrapperBookEl.innerHTML=e}}function Y(t){var n=t._id,e=t.book_image,a=t.title,o=t.list_name,i=t.description,s=t.author,l=t.buy_links;objBook={_id:n,book_image:e,title:a,list_name:o,description:i,author:s,buy_links:l}}function $(){c.default.buttonAddBookEl.removeEventListener("click",$),c.default.buttonAddBookEl.addEventListener("click",Z),c.default.addedTextEl.innerHTML='<p class="added-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>',c.default.buttonAddBookEl.textContent="REMOVE FROM THE SHOPPING LIST",P.push(objBook),localStorage.setItem("books-data",JSON.stringify(P))}function Z(){c.default.buttonAddBookEl.removeEventListener("click",Z),c.default.buttonAddBookEl.addEventListener("click",$),c.default.addedTextEl.innerHTML="",c.default.buttonAddBookEl.textContent="ADD TO SHOPPING LIST",console.log("before ="+P);var t=P.findIndex((function(t){return t._id===idBook}));P.splice(t,1),localStorage.setItem("books-data",JSON.stringify(P))}function tt(){c.default.modalCloseBtn.removeEventListener("click",tt),c.default.buttonAddBookEl.removeEventListener("click",$),c.default.wrapperBookEl.innerHTML="",c.default.addedTextEl.innerHTML="",c.default.modal.classList.add("is-hidden")}c.default.mainGalleryEl.addEventListener("click",(function(t){var n=t.target.closest(".book-card-wrapper");if(idBook=n.dataset.idbook,!n)return;!function(t){c.default.modalCloseBtn.addEventListener("click",tt),c.default.modal.classList.remove("is-hidden"),function(t){Q.apply(this,arguments)}(t),P.some((function(n){return n._id===t}))?(c.default.addedTextEl.innerHTML='<p class="added-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>',c.default.buttonAddBookEl.textContent="REMOVE FROM THE SHOPPING LIST",c.default.buttonAddBookEl.addEventListener("click",Z)):(c.default.buttonAddBookEl.textContent="ADD TO SHOPPING LIST",c.default.buttonAddBookEl.addEventListener("click",$))}(idBook)})),localStorage.getItem("books-data")&&(P=JSON.parse(localStorage.getItem("books-data")))}();
//# sourceMappingURL=index.efbad30e.js.map
